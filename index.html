<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map with Message Box Markers</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
        .message-box {
            position: relative;
            width: 80px;
            height: 60px;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
            border: 4px solid #007bff;
            background-color: #007bff;
            background-size: cover;
            background-position: center;
        }
        .message-box::after {
            content: '';
            position: absolute;
            bottom: -10px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 10px solid transparent;
            border-right: 10px solid transparent;
            border-top: 10px solid #007bff;
        }
        .badge {
            position: absolute;
            top: 5px;
            right: 5px;
            background-color: white;
            color: black;
            border-radius: 50%;
            padding: 2px 6px;
            font-size: 12px;
            font-weight: bold;
            box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);
        }
        .leaflet-popup-content {
            max-width: 300px;
            max-height: 400px;
            overflow: auto;
        }
        .twitter-tweet {
            margin: 0 auto;
        }        
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script>
        // Initialize the map and set its view to a specific location and zoom level
        var map = L.map('map').setView([13.7864985,100.5439119], 13);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: 'Â© OpenStreetMap contributors'
        }).addTo(map);

        // Define an array of locations with coordinates, details, and image URLs
        var locations = [
            { 
                coords: [13.8133689, 100.5619903], 
                details: `
                    <div class="popup-content">
                        <h3>Union Mall</h3>
                        <p>MARCKRIS SQUARE & Digital Media</p>
                        <blockquote class="twitter-tweet"><p lang="th" dir="ltr">ğŸ™ï¸ğŸ‚<br><br>[ ğŒğ€ğ‘ğ‚ğŠğ‘ğˆğ’ ğğˆğ‘ğ“ğ‡ğƒğ€ğ˜ ğğ‘ğğ‰ğ„ğ‚ğ“ ğ„ğ. ğŸğŸ ]<br><br>MARCKRIS BIRTHDAY EVENT 2024<br><br>à¹€à¸•à¸£à¸µà¸¢à¸¡à¸à¸šà¸à¸±à¸šà¸‡à¸²à¸™à¸­à¸µà¹€à¸§à¹‰à¸™à¸—à¹Œ à¸—à¸µà¹ˆà¸£à¸§à¸šà¸£à¸§à¸¡à¸—à¸¸à¸à¸à¸´à¸ˆà¸à¸£à¸£à¸¡ à¹à¸¥à¸°à¸„à¸§à¸²à¸¡à¸ªà¸¸à¸‚ à¸ à¸²à¸¢à¹ƒà¸•à¹‰à¸¡à¸§à¸¥à¸„à¸§à¸²à¸¡à¸­à¸šà¸­à¸¸à¹ˆà¸™à¸‚à¸­à¸‡à¸à¸¥à¸¸à¹ˆà¸¡à¸„à¸™à¸—à¸µà¹ˆà¸£à¸±à¸à¸¡à¸²à¸£à¹Œà¸„à¸„à¸£à¸´à¸ªà¹€à¸‚à¹‰à¸²à¹„à¸§à¹‰à¸”à¹‰à¸§à¸¢à¸à¸±à¸™ <br><br>ğŸ—“ï¸ 7-8 December 2024<br>â° 11:00 - 20:00 à¸™.<br>ğŸ“G FL, UNION CO-EVENTâ€¦ <a href="https://t.co/8m3A0Kkwiv">pic.twitter.com/8m3A0Kkwiv</a></p>&mdash; TEAM MARCKRIS (@TEAMMARCKRIS) <a href="https://twitter.com/TEAMMARCKRIS/status/1856290884339544290?ref_src=twsrc%5Etfw">November 12, 2024</a></blockquote>
			<blockquote class="twitter-tweet">
                    		<a href="https://x.com/teammarckris/status/1858385967985627226"></a>
                	</blockquote>
			<blockquote class="twitter-tweet">
                    		<a href="https://x.com/teammarckris/status/1858465163466379304"></a>
                	</blockquote>

                    </div>
                `,
                imageUrl: 'https://pbs.twimg.com/media/GcLetmvasAQxV-N?format=jpg&name=4096x4096', // Replace with your image URL
                tweetCount: 3 // Number of tweets
            },
            { 
                coords: [13.7446343, 100.5298835], 
                details: `
            <div class="popup-content">
                <h3>MBK</h3>
                <p>Digital Media</p>
                <blockquote class="twitter-tweet">
                    <a href="https://x.com/TEAMMARCKRIS/status/1857015927495151854"></a>
                </blockquote>

            </div>
        `,
                imageUrl: 'https://pbs.twimg.com/amplify_video_thumb/1857015667003715586/img/b7HJHa_wfeVUQB07.jpg', // Replace with your image URL
                tweetCount: 1
            },
		{ 
                coords: [13.7453557,100.534988], 
                details: `
            <div class="popup-content">
                <h3>Siam</h3>
                <p>TukTuks</p>
                <blockquote class="twitter-tweet">
                    <a href="https://x.com/teammarckris/status/1858117952736010697"></a>
                </blockquote>

            </div>
        `,
                imageUrl: 'https://pbs.twimg.com/tweet_video_thumb/GclcZmCaQAAgjuu.jpg', // Replace with your image URL
                tweetCount: 1
            }

        ];

        // Add markers for each location using custom icons
        locations.forEach(function(location) {
    var customIcon = L.divIcon({
        className: 'message-box',
        html: `<div class="badge">${location.tweetCount}</div>`,
        iconSize: [80, 70],
        iconAnchor: [40, 70],
        popupAnchor: [0, -70]
    });

    var marker = L.marker(location.coords, { icon: customIcon }).addTo(map);
    var element = marker.getElement();
    element.style.backgroundImage = `url(${location.imageUrl})`;

    // Add click event to zoom in on the map
    element.addEventListener('click', function() {
        map.setView(location.coords, 17); // Adjust the zoom level as needed
    });

    marker.bindPopup(location.details);

    // Ensure Twitter widgets are rendered when the popup opens
    marker.on('popupopen', function() {
        twttr.widgets.load();
    });
});
    </script>
</body>
</html>