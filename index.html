<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Map with Message Box Markers</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        #map {
            height: 100vh;
            width: 100%;
        }
        .message-box {
    position: relative;
    width: 80px;
    height: 60px;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    border: 4px solid #007bff;
    background-color: #007bff;
    background-size: cover; /* Ensures the image covers the entire box */
    background-position: center; /* Centers the image */
}

.message-box img {
    width: 100%;
    height: 100%;
    object-fit: cover; /* Ensures the image covers the entire box */
    object-position: center; /* Centers the image */
}

.message-box::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 50%;
    transform: translateX(-50%);
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #007bff;
}
.popup-content {
            max-height: 300px; /* Set a fixed height for the popup */
            overflow-y: auto; /* Enable vertical scrolling */
        }
        }
    </style>
</head>
<body>
    <div id="map"></div>
    <script src="https://cdn.jsdelivr.net/npm/leaflet@1.9.4/dist/leaflet.js"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script>
        // Initialize the map and set its view to a specific location and zoom level
        var map = L.map('map').setView([13.7864985,100.5439119], 13);

        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '© OpenStreetMap contributors'
        }).addTo(map);

        // Define an array of locations with coordinates, details, and image URLs
        var locations = [
            { 
                coords: [13.8133689, 100.5619903], 
                details: `
                    <blockquote class="twitter-tweet">
                        <a href="https://twitter.com/TEAMMARCKRIS/status/1856290884339544290"></a>
                    </blockquote>
                `,
                imageUrl: 'https://pbs.twimg.com/media/GcLetmvasAQxV-N?format=jpg&name=4096x4096' // Replace with your image URL
            },
            { 
                coords: [13.7446343, 100.5325835], 
                details: `
                    <div class="popup-content">
                        <h3>Event Details</h3>
                        <p>Join us for the MARCKRIS Birthday Event 2024!</p>
                        <blockquote class="twitter-tweet"><p lang="th" dir="ltr">🏙️🎂<br><br>[ 𝐌𝐀𝐑𝐂𝐊𝐑𝐈𝐒 𝐁𝐈𝐑𝐓𝐇𝐃𝐀𝐘 𝐏𝐑𝐎𝐉𝐄𝐂𝐓 𝐄𝐏. 𝟎𝟐 ]<br><br>MARCKRIS BIRTHDAY EVENT 2024<br><br>เตรียมพบกับงานอีเว้นท์ ที่รวบรวมทุกกิจกรรม และความสุข ภายใต้มวลความอบอุ่นของกลุ่มคนที่รักมาร์คคริสเข้าไว้ด้วยกัน <br><br>🗓️ 7-8 December 2024<br>⏰ 11:00 - 20:00 น.<br>📍G FL, UNION CO-EVENT… <a href="https://t.co/8m3A0Kkwiv">pic.twitter.com/8m3A0Kkwiv</a></p>&mdash; TEAM MARCKRIS (@TEAMMARCKRIS) <a href="https://twitter.com/TEAMMARCKRIS/status/1856290884339544290?ref_src=twsrc%5Etfw">November 12, 2024</a></blockquote>
                    </div>
                `,
                imageUrl: 'https://pbs.twimg.com/media/Gc0rcNRbQAEL-ay?format=jpg&name=4096x4096' // Replace with your image URL
            },
            { 
                coords: [51.525, -0.11], 
                details: "Location 3: London Location 2",
                imageUrl: 'https://example.com/path/to/image3.png' // Replace with your image URL
            },
            { 
                coords: [51.535, -0.12], 
                details: "Location 4: London Location 3",
                imageUrl: 'https://example.com/path/to/image4.png' // Replace with your image URL
            },
            { 
                coords: [51.545, -0.13], 
                details: "Location 5: London Location 4",
                imageUrl: 'https://example.com/path/to/image5.png' // Replace with your image URL
            }
        ];

        // Add markers for each location using custom icons
        locations.forEach(function(location) {
    var customIcon = L.divIcon({
        className: 'message-box',
        html: '',
        iconSize: [80, 70],
        iconAnchor: [40, 70],
        popupAnchor: [0, -70]
    });

    var marker = L.marker(location.coords, { icon: customIcon }).addTo(map);
            marker.getElement().style.backgroundImage = `url(${location.imageUrl})`;
            marker.bindPopup(location.details);

            // Ensure Twitter widgets are rendered when the popup opens
            marker.on('popupopen', function() {
                twttr.widgets.load();
            });

});
    </script>
</body>
</html>